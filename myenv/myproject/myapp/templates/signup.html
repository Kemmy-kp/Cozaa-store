{% extends "header.html" %}
{% load static %}
{% block content %}
<br>
<br>
<br>
<head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script>
    $(document).ready(function() {
        $('#signup-form').submit(function(e) {
            e.preventDefault(); // Prevent default form submission
            
            // Serialize form data
            var formData = $(this).serialize();
            
            // Send Ajax request
            $.ajax({
                url: '{% url 'signup' %}',
                type: 'POST',
                data: formData,
                success: function(response) {
                    // Handle success response
                    if (response.success) {
                        // Show success message or redirect
                        alert('Signup successful!');
                    } else {
                        // Show error message
                        alert('Signup failed: ' + response.error);
                    }
                },
                error: function(xhr, errmsg, err) {
                    // Handle error
                    console.log(xhr.status + ": " + xhr.responseText);
                }
            });
        });
    });
</script>

<!-- Title page -->
<section class="bg-img1 txt-center p-lr-15 p-tb-92" style="background-image: url('{% static 'images/bg-01.jpg'%}');">
    <h2 class="ltext-105 cl0 txt-center">
        Signup
    </h2>
</section>

<!-- Content page -->
<section class="bg0 p-t-104 p-b-116">
    <div class="container">
        <div class="flex-w flex-tr justify-content-center">
            <div class="size-210 bor10 p-lr-70 p-t-55 p-b-70 p-lr-15-lg w-full-md">
                {% if msg %}
                <div class="alert alert-success" role="alert">
                    {{msg}}
                </div> 
                {% elif msg1 %}
                <div class="alert alert-danger" role="alert">
                    {{msg1}}
                </div> 
                {% endif %}
                <form id="signup-form" method="post" action="{% url 'signup' %}" id="Signupform">
                    {% csrf_token %}
                    <h4 class="mtext-105 cl2 txt-center p-b-30">
                        Signup
                    </h4>
                    <div class="bor8 m-b-20 how-pos4-parent">
                        <select name="usertype">
                            <option>-----Select User------</option>
                            <option value="buyer">Buyer</option>
                            <option value="seller">Seller</option>
                        </select>
                    </div>       
                    <div class="bor8 m-b-20 how-pos4-parent" id="Email">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="email" name="email" placeholder="Enter Email">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent" id="Fname">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="text" name="firstname" placeholder="Enter First Name">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent" id="Lname">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="text" name="lastname" placeholder="Enter Last Name">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent" id="Mobile">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="number" name="mobile" placeholder="Enter Mobile Number">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent" id="Password">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="password" name="password" placeholder="Enter Password">
                    </div>
                    <div class="bor8 m-b-20 how-pos4-parent" id="Cpassword">
                        <input class="stext-111 cl2 plh3 size-116 p-l-62 p-r-30" type="password" name="cpassword" placeholder="Enter Confirm Password">
                    </div>
                    <button class="flex-c-m stext-101 cl0 size-121 bg3 bor1 hov-btn3 p-lr-15 trans-04 pointer" type="submit" value="signup">
                        Signup
                    </button>   
                </form>
            </div>
        </div>
    </div>
</section>

<script src="https://code.jquery.com/jquery-3.7.1.js"
integrity="sha256-eKhayi8LEQwp4NKxN+CfCh+3qOVUtJn3QNZ0TciWLP4="
crossorigin="anonymous">
</script>
<script>
$(document).on('submit','#Signupform',function(e){
e.preventDefault();
var email = $('#id_Email').val()
var fname = $('#id_Fname').val()
var lname = $('#id_Lname').val()
var mobile = $('#id_Mobile').val()
var password = $('#id_Password').val()
var cpassword = $('#id_Cpasssword').val()


$.ajax(

{
    type : 'POST',
    url : '/signup/',
    data : {

        name : Name,
        fname : Firstname,
        lname : Lastname,
        mobile : Mobile,
        password : Password,
        cpassword : Cpassword,


    },

    success:function(response){

        console.log(response)
    }


})



})



</script>





{% endblock %}
